#################
### WINDOW RULES ###
#################

# --- Workspace Assignments ---
windowrule = match:class ^(google-chrome)$, workspace 1
windowrule = match:class ^(Chromium)$, workspace 2 silent
windowrule = match:class ^(Lark)$, workspace 3 silent
windowrule = match:class ^(Code)$, workspace 4
windowrule = match:class DBeaver, workspace 5 silent
windowrule = match:class Dbeaver, workspace 5 silent
windowrule = match:class ^(Postman|yaak-app|bruno)$, workspace 6
windowrule = match:class ^(Spotify)$, workspace 7
windowrule = match:class ^(zen-beta|zen|com.mitchellh.ghostty)$, workspace 10

# --- Size & Floating Rules ---
windowrule = match:class ^(Chromium|Google-chrome|Navicat)$, min_size 800 600
windowrule = match:class ^(nemo|Ferdium|vesktop|steam|org.kde.audiotube)$, float on
windowrule = match:title ^(Library)$, float on

# Nextcloud
windowrule {
    name = nextcloud
    match:class = com.nextcloud.desktopclient.nextcloud
    float = on
    move = monitor_w-500 35
    size = 500 400
}

# --- Named Block Rules (Preferred for complex matches) ---
# In blocks, the 'name' must be the first line
windowrule {
    name = chrome-pip
    match:title = ^(Picture in picture)$
    float = on
    pin = on
    move = -530 monitor_h-450
    no_follow_mouse = on
    min_size = 320 170
    opacity = 0.9
}

windowrule {
    name = mpv
    match:class = mpv
    float = on
    pin = on
    no_follow_mouse = on
    no_initial_focus = on
    size = 500 280
    move = -530 monitor_h-450
}

windowrule {
    name = zen-pip
    match:title = ^(Picture-in-Picture)$
    match:class = zen
    float = on
    pin = on
    no_follow_mouse = on
    no_initial_focus = on
    size = 500 280
    move = -530 monitor_h-450
}

# --- Utilities & Tools ---
windowrule = match:class ^(xdg-desktop-portal-gtk)$, float on
windowrule = match:title ^(chromium-browser|Hình ảnh|Bitwarden)$, float on
windowrule = match:title ^(chromium-browser)$, pin on
windowrule = match:title ^(Clipman)$, size 100 20

# Opacity
windowrule = match:class ^(org.wezfurlong.wezterm)$, opacity 0.95
windowrule = match:class ^(com.mitchellh.ghostty|kitty)$, opacity 0.90

# AI / ChatGPT
windowrule {
    name = chat-gpt
    match:title = (.*chat.openai.com.*)
    float = on
    size = 500 50%
    move = 20 70
}

# --- Visuals & Input ---
windowrule = match:class ^(fcitx)$, pseudo on
windowrule = match:class ^()$ match:title ^()$, no_blur on

#################
### LAYER RULES ###
#################

# Layer rules use match:namespace
layerrule = match:namespace ^(swaync-.*)$, blur on
layerrule = match:namespace ^(swaync-.*)$, ignore_alpha 0.5
